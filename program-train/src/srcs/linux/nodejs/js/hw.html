<! reference d3-cookbook srcs>
<!>
<!>
<!>
<html>

    <head>
        <meta charset = "utf-8">
        <title>hello world</title>
        <link rel="stylesheet" type="text/css" href="../libs/css/styles.css">
        <!script src="http://d3js.org/d3.v3.min.js" charset = "utf-8"><!/script>
        <script src="../libs/d3/d3.js" charset = "utf-8"></script>
    </head>

    <body>

        <p>hello world 1</p>
        <p>hello world 2</p>
        <div></div>
        <div></div>
        <div></div>

            <script>
                var paragraphs = document.getElementsByTagName("p");
                for (var i=0; i<paragraphs.length; i++){
                    var paragraph = paragraphs.item(i);
                    paragraph.innerHTML = "I like d3.";
                }
            </script>
            <script>

                /*
                 * ! reference d3-cookbook srcs
                 */
                function single_selection()
                {
                    function SimpleWidget(spec)
                    {
                        var instance = {};
                        var headline, description;

                        instance.render = function (){
                            var div = d3.select("body").append("div");

                            div.append("h3").text(headline);

                            div.attr("class", "box")
                               .attr("style", "color:" + spec.color)
                               .append("p")
                               .text(description);

                            return instance;
                        };

                        instance.headline = function (h){
                            if(!arguments.length) return headline;
                            headline = h;
                            return instance;
                        };

                        instance.description = function(d){
                            if(!arguments.length) return description;
                            description = d;
                            return instance;
                        };

                        return instance;
                    }

                    var widget = SimpleWidget({color: "#6495ed"});

                    widget.headline("Simple Widget")
                          .description("This is a simple widget demostrating function javascript");

                    widget.render();
                }

                /*
                 * ! reference d3-cookbook srcs
                 */
                function multiple_selection()
                {
                    var c = d3.select("body")
                              .selectAll("p")
                              .text("Nice D3");
                    c.style("color", "red")
                     .style("font-size", "72px");

                    d3.selectAll("div").attr("class", "red box");
                }

                function selection_iteration()
                {
                    d3.selectAll("div")
                      .each(function(d, i){
                          d3.select(this).append("h1").text(i);
                      });
                }
                
                /*
                 *
                 */

                multiple_selection();

                single_selection();

                selection_iteration();

            </script>
    </body>


    <body>
        <section id="section1">
            <div>
                <p>blue box</p>
            </div>
        </section>
        <section id="section2">
            <div>
                <p>red box</p>
            </div>
        </section>

            <script>
                d3.select("#section1 > div")
                  .attr("class", "blue box");

                d3.select("#section2")
                  .select("div")
                  .attr("class", "red box");
            </script>
    </body>
</html>

